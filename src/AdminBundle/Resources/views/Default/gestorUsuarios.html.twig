{% extends 'base.html.twig' %}
{% block body %}
  <!-- Page Heading -->
  <div class="row">
      <div class="col-lg-12">
          <h1 class="page-header">
              Usuarios
          </h1>
      </div>
  </div>
  <!-- /.row -->
  <table>
        <tbody>
          <tr>
            <th>ID</th>
            <th>Username</th>
            <th>Roles</th>
            <th>Quitar rol</th>
            <th>Añadir rol</th>
          </tr>
          <p>

          </p>
          {% for user in users %}
          <form method="post">
            <tr>
              <td>{{ user.id }}</td>
              <td>{{ user.username }}</td>
              <td style="text-align: left;">{% for rol in user.roles %}
                  <span>{{rol}}</span><br>
                {% endfor %}
              </td>
              <td>
                <select class="rolesBD" name="quitarRol">
                    <option value=""></option>
                  {% for rol in user.roles %}
                    <option value=""+{{rol}}>{{rol}}</option>
                  {% endfor %}
                </select>
              </td>
              <td>
                <select class="rolesInsertar" name="añadirRol">
                  <option value=""></option>
                  <option value="ROLE_USER">ROLE_USER</option>
                  <option value="ROLE_ADMIN">ROLE_ADMIN</option>
                  <option value="ROLE_SUPER_ADMIN">ROLE_SUPER_ADMIN</option>
                </select>
              </td>
              <td><button class="btn btn-primary" id="botonPrueba" type="button" name="button">Confirmar</button></td>
            </tr>
          </form>
          {% endfor %}
        </tbody>
      </table>

    {% endblock %}
    {% block javascripts %}
      <script>
        $(document).on('click','#botonPrueba',function(){
          //Sacando el valor del select
          $(".rolesBD").change(function() {
            
          });
          $.ajax('{{ path('button_action_route') }}', {
            data: {
            // you can pass some parameters to the controller here
            },
            success: function(data) {
            // change button color
            },
            error: function() {
              // show alert or something
            }
          });
          return false; // this stops normal button behaviour from executing;
        });
      </script>
    {% endblock %}
